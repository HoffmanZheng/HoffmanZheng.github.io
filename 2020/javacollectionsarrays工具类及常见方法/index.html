<!DOCTYPE html>
<html lang="en-us">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="author" content="Chenghao.Zheng">
  
  
  
  <link rel="prev" href="http://chenghao.monster/2019/maven%E5%8C%85%E7%AE%A1%E7%90%86%E4%B8%8E%E5%86%B2%E7%AA%81%E8%A7%A3%E5%86%B3/" />
  
  <link rel="canonical" href="http://chenghao.monster/2020/javacollectionsarrays%E5%B7%A5%E5%85%B7%E7%B1%BB%E5%8F%8A%E5%B8%B8%E8%A7%81%E6%96%B9%E6%B3%95/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           Java：Collection、Map 工具类及常见方法 | 人间一场大梦
       
  </title>
  <meta name="title" content="Java：Collection、Map 工具类及常见方法 | 人间一场大梦">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "http:\/\/chenghao.monster"
    },
    "articleSection" : "posts",
    "name" : "Java：Collection、Map 工具类及常见方法",
    "headline" : "Java：Collection、Map 工具类及常见方法",
    "description" : "本篇介绍 Java 中的集合类框架的基础知识，其源码实现、相关面试题会在之后更新，敬请期待。\n一、Collection 继承体系 1. 集合 Collection 介绍  为什么需要集合？  集合使 Java 可以处理多个同类型的对象（List \/ Set），亦或是多个键值对类型的数据（Map）。   集合的常用功能：  添加：add(Object obj)、addAll(Collection c)； 删除：clear()、remove(Object)、removeAll(Collection)； 判断包含：isEmpty()、contains(Object)、containsAll(Collection)；  contains 方法进行判定时，会调用 equals 方法，所以在用集合存储引用对象（非原生数据类型）时需要重写 equals 和 HashCode 方法。   遍历获取：Iteratoriterator()； 长度：size()； 交集：retainAll(Collection c)； 若有元素被移除，此操作会改变原有实例集合。   迭代器（Iterator）：  以内部类的方式遍历集合中的元素，有以下方法：  hasNext()； next()； remove()；   构造思路：  写一个 iterator() 方法返回一个自己的迭代器， 创建一个自己的迭代器继承 Iterator 接口，重写接口的三个方法。 使用时：用 iterator() 创建迭代器，再用迭代器去调用其中的三个方法。      2. List：对付顺序的好帮手  List 是插入有序的，元素可重复的。 List 有个自己的迭代器 ListIterator ，比普通的迭代器多出几个功能：向前遍历、添加元素、设置元素等。 List 常用的实现类有  ArrayList ：底层数据结构是数组，线程不安全。 LinkedList ：底层数据结构是链表，线程不安全。 Vector ：底层数据结构是数组，线程安全。    3.",
    "inLanguage" : "en-us",
    "author" : "Chenghao Zheng",
    "creator" : "Chenghao Zheng",
    "publisher": "Chenghao Zheng",
    "accountablePerson" : "Chenghao Zheng",
    "copyrightHolder" : "Chenghao Zheng",
    "copyrightYear" : "2020",
    "datePublished": "2020-01-02 16:11:47 \x2b0100 CET",
    "dateModified" : "2020-01-02 16:11:47 \x2b0100 CET",
    "url" : "http:\/\/chenghao.monster\/2020\/javacollectionsarrays%E5%B7%A5%E5%85%B7%E7%B1%BB%E5%8F%8A%E5%B8%B8%E8%A7%81%E6%96%B9%E6%B3%95\/",
    "wordCount" : "346",
    "keywords" : [ "Java", "人间一场大梦"]
}
</script>

</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="http://chenghao.monster">人间一场大梦</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="http://chenghao.monster">人间一场大梦</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">Java：Collection、Map 工具类及常见方法</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="http://chenghao.monster" rel="author">Chenghao Zheng</a> with ♥ 
                <span class="post-time">
                on <time datetime=2020-01-02 itemprop="datePublished">January 2, 2020</time>
                </span>
                in
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        <a href="http://chenghao.monster/categories/study-notes/"> Study notes </a>
                        
                </span>
        </div>
    </header>
    <div class="post-content">
        

        
            
        

        
        
     
          
          
          

          
          
          

          <p>本篇介绍 Java 中的集合类框架的基础知识，其源码实现、相关面试题会在之后更新，敬请期待。</p>
<h1 id="collection-">一、Collection 继承体系</h1>
<p><img src="/images/Collections.png" alt="Collection 继承体系"></p>
<h3 id="1--collection-">1. 集合 Collection 介绍</h3>
<ul>
<li>为什么需要集合？
<ul>
<li>集合使 Java 可以处理多个同类型的对象（List / Set），亦或是多个键值对类型的数据（Map）。</li>
</ul>
</li>
<li>集合的常用功能：
<ul>
<li>添加：add(Object obj)、addAll(Collection c)；</li>
<li>删除：clear()、remove(Object)、removeAll(Collection)；</li>
<li>判断包含：isEmpty()、contains(Object)、containsAll(Collection)；
<ul>
<li>contains 方法进行判定时，会调用 <code>equals</code> 方法，所以在用集合存储引用对象（非原生数据类型）时需要重写 <code>equals</code> 和 <code>HashCode</code> 方法。</li>
</ul>
</li>
<li>遍历获取：Iterator<!-- raw HTML omitted --> iterator()；</li>
<li>长度：size()；</li>
<li>交集：retainAll(Collection c)； 若有元素被移除，此操作会改变原有实例集合。</li>
</ul>
</li>
<li>迭代器（Iterator）：
<ul>
<li>以内部类的方式遍历集合中的元素，有以下方法：
<ul>
<li>hasNext()； next()； remove()；</li>
</ul>
</li>
<li>构造思路：
<ul>
<li>写一个 <code>iterator()</code> 方法返回一个自己的迭代器， 创建一个自己的迭代器继承 <code>Iterator</code> 接口，重写接口的三个方法。</li>
<li>使用时：用 <code>iterator()</code> 创建迭代器，再用迭代器去调用其中的三个方法。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="2-list">2. List：对付顺序的好帮手</h3>
<ul>
<li>List 是插入有序的，元素可重复的。</li>
<li>List 有个自己的迭代器 <code>ListIterator</code> ，比普通的迭代器多出几个功能：向前遍历、添加元素、设置元素等。</li>
<li>List 常用的实现类有
<ul>
<li><code>ArrayList</code> ：底层数据结构是数组，线程不安全。</li>
<li><code>LinkedList</code> ：底层数据结构是链表，线程不安全。</li>
<li><code>Vector</code> ：底层数据结构是数组，线程安全。</li>
</ul>
</li>
</ul>
<h3 id="3-set">3. Set：注重独一无二的性质</h3>
<ul>
<li>Set 是插入无序的，元素不可重复的。</li>
<li>Set 常用实现类有
<ul>
<li><code>HashSet</code> ：底层数据结构是哈希表（是一个元素为链表的数组），顺序完全随机。</li>
<li><code>TreeSet</code> ：底层数据结构是哈希表(是一个元素为链表的数组)，保证元素的插入排序不变。</li>
<li><code>LinkedTreeSet</code> ：底层数据结构由哈希表和链表组成，可以用来排序。</li>
</ul>
</li>
</ul>
<h3 id="4-mapkey">4. Map：用Key来搜索的专家（映射）</h3>
<ul>
<li>如果数据是键值对类型的，就需要选择 <code>HashMap</code> 进行存储。如果要保持插入顺序，可以选择 <code>LinkedHashMap</code> ，如果需要排序则选择 <code>TreeMap</code> 。</li>
<li>Key 不能重复（是唯一的），每个 Key 最多只能映射到一个值，但多个 Key 可以引用相同的对象。</li>
<li>Map 的常用方法有：</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">containsKey<span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span> containsValue<span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
get<span style="color:#f92672">(</span>Key<span style="color:#f92672">)</span><span style="color:#f92672">;</span> put<span style="color:#f92672">(</span>K<span style="color:#f92672">,</span> V<span style="color:#f92672">)</span><span style="color:#f92672">;</span>
keySet<span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>  <span style="color:#75715e">//返回所有的 key
</span></code></pre></div><ul>
<li>HashMap 的 key 的 set 就是一个 HashSet，HashSet 有的功能 HashMap 都有，所有 HashSet 里面包了一个 HashMap。</li>
<li>HashMap 的线程不安全性：HashMap的实现 没有被同步 &mdash;&gt; HashMap 的死循环（搜这个）。
<ul>
<li>多线程环境下 扩容的时候 有可能会变成一个死循环的链表</li>
<li>多线程环境下  使用 ConcurrentHashMap</li>
</ul>
</li>
<li>HashMap 在 JDK 7 下的改变：链表 &mdash;&gt; 红黑树（HashSet）
<ul>
<li>不同的对象有相同的 HashCode &mdash;&gt; 桶分布不均匀，性能下降。变成了链表</li>
<li>JDK 7 之后，在处理 哈希桶的碰撞（多个元素 <code>HashCode</code> 相同，存储在同一个哈希桶中）时，会将链表 变成了红黑树的结构。</li>
</ul>
</li>
</ul>
<h3 id="5-guava">5. Guava</h3>
<ul>
<li>是 <code>Google</code> 写的集合框架，在原生 JDK Collection 的基础上增添了更多有用的实现，如：<code>MultiSet</code> 可以存储相同的元素，并告诉你他们被存了多少次；<code>BidirectionMap</code> 可以实现从 <code>value</code> 映射回 <code>Key</code> 值。</li>
<li>思想：不要重复发明轮子，尽量使用经过实战检验的类库。</li>
</ul>
<h1 id="heading">二、集合框架常见面试问题（敬请期待）</h1>
<h3 id="1-arraylist--linkedlist-">1. ArrayList 与 LinkedList 区别?</h3>
<ul>
<li>补充内容:RandomAccess接口</li>
<li>补充内容:双向链表和双向循环链表</li>
<li>ArrayList 与 Vector 区别呢?为什么要用 ArrayList 取代 Vector 呢？</li>
<li>说一说 ArrayList 的扩容机制吧
<ul>
<li>当调用 <code>ArrayList</code> 的 <code>add</code> 或者 <code>addAll</code> 方法的时候，会先进行判定现有容量是否足够，如果不够则会进行 <code>动态扩容</code> ，即新建一个更大容量（一般为之前容量的 1.5 倍）的 <code>ArrayList</code> ，然后把原有的数据拷贝进去，最后赋值给之前的引用对象。</li>
</ul>
</li>
</ul>
<h3 id="2-hashmap--hashtable-">2. HashMap 和 Hashtable 的区别</h3>
<ul>
<li>HashMap 和 HashSet区别</li>
<li>HashSet如何检查重复</li>
<li>HashMap的底层实现
<ul>
<li>JDK1.8之前</li>
<li>JDK1.8之后</li>
</ul>
</li>
<li>HashMap 的长度为什么是2的幂次方</li>
<li>HashMap 多线程操作导致死循环问题</li>
<li>ConcurrentHashMap 和 Hashtable 的区别</li>
<li>ConcurrentHashMap线程安全的具体实现方式/底层具体实现
<ul>
<li>JDK1.7（上面有示意图）</li>
<li>JDK1.8 （上面有示意图）</li>
</ul>
</li>
</ul>
<h3 id="3-comparable--comparator">3. comparable 和 Comparator的区别</h3>
<ul>
<li>comparable接口实际上是出自 <code>java.lang</code> 包 它有一个 <code>compareTo(Object obj)</code> 方法用来排序
<ul>
<li>想要对引用类型对象进行排序的话，会让他们的类实现 <code>comparable</code> 接口。</li>
</ul>
</li>
<li>comparator接口实际上是出自 <code>java.util</code> 包它有一个 <code>compare(Object obj1, Object obj2)</code> 方法用来排序
<ul>
<li>comparator 接口一般用于原生数据类型，其本身就可以比较，但是想要重写 <code>compare</code> 方法的情况。</li>
</ul>
</li>
</ul>
<h4 id="31-comparator">3.1 Comparator定制排序</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">Collections<span style="color:#f92672">.</span><span style="color:#a6e22e">sort</span><span style="color:#f92672">(</span>arrayList<span style="color:#f92672">,</span> <span style="color:#66d9ef">new</span> Comparator<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
	<span style="color:#a6e22e">@Override</span>
	<span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">compare</span><span style="color:#f92672">(</span>Integer o1<span style="color:#f92672">,</span> Integer o2<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
		<span style="color:#66d9ef">return</span> o2<span style="color:#f92672">.</span><span style="color:#a6e22e">compareTo</span><span style="color:#f92672">(</span>o1<span style="color:#f92672">)</span><span style="color:#f92672">;</span>    <span style="color:#75715e">// 从小到大排序，变成了从大到小。
</span><span style="color:#75715e"></span>        <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>               <span style="color:#75715e">// 用匿名内部类 重写比较器，定制原生数据类型的比较方法。
</span></code></pre></div><h4 id="32--compareto-">3.2 重写 compareTo 方法实现按年龄来排序</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#66d9ef">public</span>  <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Person</span> <span style="color:#66d9ef">implements</span> Comparable<span style="color:#f92672">&lt;</span>Person<span style="color:#f92672">&gt;</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">private</span> String name<span style="color:#f92672">;</span>
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">int</span> age<span style="color:#f92672">;</span>

    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Person</span><span style="color:#f92672">(</span>String name<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span> age<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#66d9ef">super</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> name<span style="color:#f92672">;</span>
        <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">age</span> <span style="color:#f92672">=</span> age<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>

   <span style="color:#75715e">// TODO重写compareTo方法实现按年龄来排序
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">@Override</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">compareTo</span><span style="color:#f92672">(</span>Person o<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
        <span style="color:#75715e">// TODO Auto-generated method stub
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">age</span> <span style="color:#f92672">&gt;</span> o<span style="color:#f92672">.</span><span style="color:#a6e22e">getAge</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> 1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span> <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">age</span> <span style="color:#f92672">&lt;</span> o<span style="color:#f92672">.</span><span style="color:#a6e22e">getAge</span><span style="color:#f92672">(</span><span style="color:#f92672">)</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
            <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span>1<span style="color:#f92672">;</span>
        <span style="color:#f92672">}</span>
        <span style="color:#66d9ef">return</span> age<span style="color:#f92672">;</span>
    <span style="color:#f92672">}</span>
<span style="color:#f92672">}</span>                     <span style="color:#75715e">// 对于非原生数据类型，需要其实现 comparable 接口，来进行排序。
</span></code></pre></div><h3 id="4-">4. 如何选用集合?</h3>
<ul>
<li>主要根据集合的特点来选用，比如我们需要根据键值获取到元素值时就选用 Map 接口下的集合，需要排序时选择 TreeMap，不需要排序时就选择HashMap,需要保证线程安全就选用 ConcurrentHashMap。</li>
<li>当我们只需要存放元素值时，就选择实现Collection接口的集合，需要保证元素唯一时选择实现 Set 接口的集合比如 TreeSet 或 HashSet，不需要就选择实现List接口的比如ArrayList或LinkedList，然后再根据实现这些接口的集合的特点来选用。</li>
</ul>

    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>Chenghao.Zheng </span>
                </p>
            
           
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=http://chenghao.monster/2020/javacollectionsarrays%E5%B7%A5%E5%85%B7%E7%B1%BB%E5%8F%8A%E5%B8%B8%E8%A7%81%E6%96%B9%E6%B3%95/>http://chenghao.monster/2020/javacollectionsarrays%E5%B7%A5%E5%85%B7%E7%B1%BB%E5%8F%8A%E5%B8%B8%E8%A7%81%E6%96%B9%E6%B3%95/</span>
            </p>
            
             
            <p class="copyright-item lincese">
                本文采用知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
            </p>
            
    </div>

  
    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>Tag(s): 
            
            <span class="tag"><a href="http://chenghao.monster/tags/java/">
                    #Java</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> · 
                <span><a href="http://chenghao.monster">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="http://chenghao.monster/2019/maven%E5%8C%85%E7%AE%A1%E7%90%86%E4%B8%8E%E5%86%B2%E7%AA%81%E8%A7%A3%E5%86%B3/" class="prev" rel="prev" title="Maven：包管理与冲突解决"><i class="iconfont icon-left"></i>&nbsp;Maven：包管理与冲突解决</a>
         
        
    </div>

    <div class="post-comment">
          
                 
          
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2019 - 2020</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="http://chenghao.monster">Chenghao.Zheng</a> | </span> 
         

         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span> 
    </div>
</footer>












    
     <link href="//lib.baomitu.com/lightgallery/1.6.11/css/lightgallery.min.css" rel="stylesheet">  
      
     <script src="/js/vendor_gallery.min.js" async="" ></script>
    
  



     </div>
  </body>
</html>
